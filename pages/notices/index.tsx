import { useEffect, useState } from 'react';
import { GetServerSideProps, NextPage } from 'next';
import { isSafari } from 'react-device-detect';
import styled from '@emotion/styled';
import { NoticeData } from 'types';
import Seo, { originTitle } from '@/components/Seo';
import Anchor from '@/components/Anchor';
import { vectors } from '@/components/vectors';
import styles from '@/styles/Notice.module.sass';

interface NoticeProps {
  notices: NoticeData[];
}

const BackButton = styled.i({
  display: 'block',
  background: `url(${vectors.backward}) no-repeat 50% 50%/contain`,
});

const Notices: NextPage<NoticeProps> = ({ notices }) => {
  const [currentPage, setCurrentPage] = useState<string | null>(null);

  useEffect(() => {
    const storedPage = localStorage.getItem('currentPage');
    setCurrentPage(storedPage);
  }, []);

  const [noticesData, setNoticesData] = useState<NoticeData[]>([]);
  useEffect(() => {
    setNoticesData(notices);
  }, [notices]);

  const [deferredPrompt, setDeferredPrompt] = useState<Event | null>(null);
  const [deviceSafari, setDeviceSafari] = useState<string>();

  useEffect(() => {
    const handleBeforeInstallPrompt = (e: any) => {
      e.preventDefault();
      setDeferredPrompt(e);
    };

    window.addEventListener('beforeinstallprompt', handleBeforeInstallPrompt);

    return () => {
      window.removeEventListener('beforeinstallprompt', handleBeforeInstallPrompt);
    };
  }, []);

  const onInstallPWA = () => {
    if (deferredPrompt) {
      const promptEvent = deferredPrompt as any;
      promptEvent.prompt();
      promptEvent.userChoice.then((choiceResult: any) => {
        if (choiceResult.outcome === 'accepted') {
          console.log('User accepted the install prompt');
        } else {
          console.log('User dismissed the install prompt');
        }
        setDeferredPrompt(null);
      });
    }
  };
  useEffect(() => {
    if (isSafari) {
      setDeviceSafari('isSafari');
    }
  }, []);

  const timestamp = Date.now();

  return (
    <main className={styles.notice}>
      <Seo
        pageTitles={`문의 및 공지 - ${originTitle}`}
        pageTitle="문의 및 공지"
        pageDescription="제제없 문의 및 공지를 확인하세요"
        pageImg={`https://jejeup.dev1stud.io/og-image.webp?ts=${timestamp}`}
      />
      <div className="top-link">
        {currentPage ? (
          <Anchor href={`/${currentPage}`}>
            <BackButton />
            <span>뒤로가기</span>
          </Anchor>
        ) : (
          <Anchor href="/">
            <BackButton />
            <span>뒤로가기</span>
          </Anchor>
        )}
      </div>
      <div className={styles.content}>
        <h1>
          <span>문의 및 공지</span>
          <em>JEJEUP.NOTICES</em>
        </h1>
        <div className={styles.summary}>
          <p>
            평소에 유튜버들이 작품정보를 <span>영상 제목이나 썸네일에 넣지 않아</span> 정보를 알 수 없어 불편하셨나요?
          </p>
          <p>
            &apos;제제없&apos;에서는 그런 영상들을 모아서 <span>눌러보기 전에 어떤 영상인지 알려드립니다!</span>
          </p>
          <div className={styles.interation} aria-hidden>
            <svg
              width="58"
              height="55"
              viewBox="0 0 58 55"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              className={styles.svg1}
            >
              <path
                d="M45.1262 31.374V36.5282C45.1262 40.0365 45.8625 41.769 49.3275 44.411C51.8829 46.3601 54.525 48.1359 57.4702 49.9983L54.6116 54.0696C51.6231 52.1639 48.6345 50.1282 46.2957 48.3524C44.3899 46.9231 42.7441 45.4938 42.4842 44.8874H42.4409C42.2243 45.5371 40.4052 47.0531 38.4995 48.4824C36.1606 50.2582 33.1721 52.2938 30.1835 54.1996L27.2383 49.9983C30.1835 48.1359 32.8256 46.3601 35.381 44.411C38.846 41.769 39.5823 40.0365 39.5823 36.5282V31.374H45.1262Z"
                fill="#EF233C"
              />
              <path
                d="M22.7404 49.0461V43.4588H7.49445V49.0461H22.7404ZM28.1977 53.6805H2.03711V31.7212H7.49445V38.8244H22.7404V31.7212H28.1977V53.6805Z"
                fill="#EF233C"
              />
              <path
                d="M28.9275 5.35453V0.546875H55.781V5.35453H45.1262V5.9609C45.1262 9.38257 45.7326 11.0284 49.2409 13.5405C51.9263 15.4463 54.4384 17.0921 57.4702 18.9113L54.7415 23.0692C51.7097 21.2068 48.7211 19.2578 46.2957 17.5253C44.3466 16.1826 42.7007 14.6667 42.4842 14.1902H42.4409C42.2676 14.6667 40.8816 15.966 38.4995 17.6552C36.074 19.3877 33.0854 21.3367 30.0536 23.1992L27.2383 18.9113C30.2701 17.0921 32.7822 15.4463 35.4676 13.5405C38.9759 11.0284 39.5823 9.38257 39.5823 5.9609V5.35453H28.9275Z"
                fill="#332941"
              />
              <path
                d="M1.68918 5.35453V0.546875H28.5428V5.35453H17.888V5.9609C17.888 9.38257 18.4943 11.0284 22.0026 13.5405C24.688 15.4463 27.2001 17.0921 30.2319 18.9113L27.5033 23.0692C24.4714 21.2068 21.4829 19.2578 19.0574 17.5253C17.1083 16.1826 15.4625 14.6667 15.2459 14.1902H15.2026C15.0293 14.6667 13.6434 15.966 11.2612 17.6552C8.83569 19.3877 5.84715 21.3367 2.81529 23.1992L0 18.9113C3.03186 17.0921 5.54397 15.4463 8.22932 13.5405C11.7376 11.0284 12.344 9.38257 12.344 5.9609V5.35453H1.68918Z"
                fill="#332941"
              />
            </svg>
            <svg
              width="207"
              height="56"
              viewBox="0 0 207 56"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              className={styles.svg2}
            >
              <path
                d="M203.845 42.1341V44.4513H186.658V30.8237H203.458V33.141H189.39V36.5065H203.265V38.7686H189.39V42.1341H203.845ZM183.514 48.6444H206.852V50.9617H183.514V48.6444Z"
                fill="#332941"
              />
              <path
                d="M181.782 54.3549H179.05V28.9204H181.782V54.3549ZM168.402 30.6308C172.126 30.6308 174.83 33.1687 174.83 38.0239V40.8928C174.83 45.748 172.126 48.2583 168.402 48.2583C164.678 48.2583 161.975 45.748 161.975 40.8928V38.0239C161.975 33.1411 164.678 30.6308 168.402 30.6308ZM168.402 45.8032C170.388 45.8032 172.209 44.3963 172.209 40.5066V38.4101C172.209 34.5204 170.361 33.1135 168.402 33.1135C166.416 33.1135 164.595 34.5204 164.595 38.4101V40.5066C164.595 44.3963 166.416 45.8032 168.402 45.8032Z"
                fill="#332941"
              />
              <path
                d="M161.702 38.1066V40.479H157.785V54.3549H155.054V28.9204H157.785V38.1066H161.702ZM145.454 41.5825H145.427C145.178 42.1894 144.709 42.7411 143.827 43.7066C142.695 44.948 141.233 46.4101 139.358 48.1204L137.564 46.2721C139.247 44.7825 140.682 43.3756 141.923 41.9963C143.606 40.0928 144.047 38.8514 144.047 36.8928V30.7687H146.806V36.8928C146.806 39.0721 147.33 40.2032 149.013 42.079C150.199 43.3756 151.413 44.5342 153.068 45.9963L151.302 47.8721C149.399 46.1066 148.158 44.8652 147.109 43.7342C146.337 42.9066 145.675 42.1342 145.454 41.5825Z"
                fill="#332941"
              />
              <path
                d="M115.088 41.9966H138.426V44.3138H115.088V41.9966ZM121.184 46.5483V51.7069H135.557V54.0793H118.453V46.5483H121.184ZM118.536 29.9966H134.84V32.3138H121.24V36.9759H135.005V39.2931H118.536V29.9966Z"
                fill="#332941"
              />
              <path
                d="M104.995 30.4652V42.6859H93.3809V30.4652H104.995ZM115.974 36.0377V38.4101H112.36V47.0721H109.657V28.9204H112.36V36.0377H115.974ZM99.5602 45.6377V51.7066H113.05V54.079H96.8291V45.6377H99.5602ZM96.0567 32.7825V40.3687H102.319V32.7825H96.0567Z"
                fill="#332941"
              />
              <path
                d="M90.7394 54.3549H88.0084V39.1825H82.6015V36.7825H88.0084V28.9204H90.7394V54.3549ZM77.167 41.5825H77.1394C76.8911 42.1894 76.4222 42.7411 75.5394 43.7066C74.4084 44.948 72.9463 46.4101 71.0704 48.1204L69.2773 46.2721C70.9601 44.7825 72.3946 43.3756 73.636 41.9963C75.3187 40.0928 75.7601 38.8514 75.7601 36.8928V30.7687H78.5187V36.8928C78.5187 39.0721 79.0429 40.2032 80.7256 42.079C81.9118 43.3756 83.1256 44.5342 84.7808 45.9963L83.0153 47.8721C81.1118 46.1066 79.8704 44.8652 78.8222 43.7342C78.0498 42.9066 77.3877 42.1342 77.167 41.5825Z"
                fill="#EF233C"
              />
              <path
                d="M70.4947 37.9687V40.3411H66.5775V54.3549H63.8465V28.9204H66.5775V37.9687H70.4947ZM50.9361 31.0445V45.0308H52.3154C55.9016 45.0308 58.8258 44.8101 61.8327 44.3135L62.1361 46.6583C58.8534 47.2377 55.9568 47.4308 51.8189 47.4308H48.2051V31.0445H50.9361Z"
                fill="#EF233C"
              />
              <path
                d="M35.5205 44.9202C40.3757 44.9202 43.4654 46.8788 43.4654 49.5271V50.4651C43.4654 53.1133 40.3757 55.072 35.5205 55.072C30.6654 55.072 27.5757 53.1133 27.5757 50.4651V49.5271C27.5757 46.8788 30.6654 44.9202 35.5205 44.9202ZM36.955 32.1478V32.7823C36.955 33.9685 37.8378 34.6857 39.9619 35.5685C41.2033 36.0926 42.9412 36.7271 45.1205 37.472L44.1274 39.6237C42.086 38.9064 40.3481 38.2719 38.3067 37.3892C37.1481 36.8926 35.9343 36.2857 35.5205 35.5685C35.1067 36.2857 33.9205 36.8926 32.7619 37.3892C30.6929 38.2719 28.955 38.9064 26.9136 39.6237L25.9205 37.472C28.0998 36.7271 29.8378 36.0926 31.0791 35.5685C33.2033 34.6857 34.086 33.9685 34.086 32.7823V32.1478H26.886V29.8857H44.155V32.1478H36.955ZM23.8516 40.9754H47.1895V43.2926H23.8516V40.9754ZM35.5205 52.8375C38.6378 52.8375 40.7619 51.6237 40.7619 50.2995V49.6926C40.7619 48.3685 38.6378 47.1547 35.5205 47.1547C32.4033 47.1547 30.2791 48.3685 30.2791 49.6926V50.2995C30.2791 51.6237 32.4033 52.8375 35.5205 52.8375Z"
                fill="#EF233C"
              />
              <path
                d="M17.2075 31.2377V33.6101H14.2833V37.6101C14.2833 39.6514 14.5868 40.5894 15.4695 42.2445C16.1868 43.5963 16.9592 44.9204 18.2282 46.6308L16.2695 48.0101C15.2489 46.548 14.8075 45.8308 14.2282 44.8377C13.5937 43.7618 13.0971 42.879 12.9868 42.4101H12.9592C12.8213 42.9342 12.2695 43.817 11.6351 44.8101C11.1937 45.4997 10.2558 46.8514 9.48334 47.7066H9.42817C8.65575 46.8514 7.71782 45.4997 7.27644 44.8101C6.64196 43.817 6.09023 42.9342 5.9523 42.4101H5.92472C5.81437 42.879 5.34541 43.7618 4.71092 44.8377C4.13161 45.8308 3.52472 46.7963 2.44886 48.2859L0.490234 46.9066C1.86954 45.0583 2.7523 43.5963 3.46954 42.2445C4.3523 40.5894 4.62817 39.6514 4.62817 37.6101V33.6101H1.62127V31.2377H17.2075ZM21.8695 40.5066V54.3549H19.2213V28.9204H21.8695V38.1342H25.1247V40.5066H21.8695ZM7.99368 41.4445C8.37989 42.1894 8.82127 42.9618 9.45575 43.8445C10.0902 42.9618 10.5316 42.1894 10.9178 41.4445C11.5247 40.2308 11.7178 39.5687 11.7178 37.6377V33.6101H7.19368V37.6377C7.19368 39.5687 7.38679 40.2308 7.99368 41.4445Z"
                fill="#EF233C"
              />
              <path
                d="M204.784 25.6195H202.053V10.4471H196.646V8.04713H202.053V0.185059H204.784V25.6195ZM191.212 12.8471H191.184C190.936 13.454 190.467 14.0057 189.584 14.9713C188.453 16.2126 186.991 17.6747 185.115 19.3851L183.322 17.5368C185.005 16.0471 186.439 14.6402 187.681 13.2609C189.364 11.3575 189.805 10.1161 189.805 8.15747V2.03334H192.564V8.15747C192.564 10.3368 193.088 11.4678 194.771 13.3437C195.957 14.6402 197.171 15.7989 198.826 17.2609L197.06 19.1368C195.157 17.3713 193.915 16.1299 192.867 14.9989C192.095 14.1713 191.433 13.3989 191.212 12.8471Z"
                fill="#EF233C"
              />
              <path
                d="M181.973 25.6195H179.242V11.523H174.331V12.1575C174.331 17.0126 171.655 19.4954 167.931 19.4954C164.207 19.4954 161.531 17.0126 161.531 12.1575V9.28851C161.531 4.40575 164.207 1.92299 167.931 1.92299C171.6 1.92299 174.276 4.37816 174.331 9.12299H179.242V0.185059H181.973V25.6195ZM167.931 17.0402C169.917 17.0402 171.711 15.6609 171.711 11.7713V9.67471C171.711 5.78506 169.917 4.40575 167.931 4.40575C165.945 4.40575 164.152 5.78506 164.152 9.67471V11.7713C164.152 15.6609 165.945 17.0402 167.931 17.0402Z"
                fill="#EF233C"
              />
              <path
                d="M159.137 13.5644H156.433V8.04713H151.302C151.026 10.392 148.985 12.9299 145.013 12.9299C140.709 12.9299 138.695 9.97816 138.695 7.4954V6.39196C138.695 3.9092 140.709 0.957474 145.013 0.957474C148.93 0.957474 150.944 3.41265 151.275 5.7023H156.433V0.185059H159.137V13.5644ZM155.854 21.5644C155.661 22.0885 155.192 22.6678 154.254 23.7437C153.702 24.3782 152.792 25.2885 152.102 26.0058L150.309 24.2402V25.6747H141.73V14.9989H144.268V18.0057H147.744V14.9989H150.309V24.1851C151.026 23.4954 151.826 22.723 152.599 21.8954C154.061 20.2678 154.502 19.4402 154.502 17.4816V14.9437H157.206V17.4816C157.206 19.4402 157.647 20.2678 159.109 21.8954C159.882 22.7506 160.626 23.523 161.371 24.2402L159.606 26.0058C158.916 25.2885 158.006 24.3782 157.454 23.7437C156.516 22.6402 156.047 22.0885 155.854 21.5644ZM145.013 10.5851C147.44 10.5851 148.709 8.87472 148.709 7.35747V6.52989C148.709 5.01265 147.44 3.32989 145.013 3.32989C142.585 3.32989 141.316 5.01265 141.316 6.52989V7.35747C141.316 8.87472 142.585 10.5851 145.013 10.5851ZM144.268 23.4678H147.744V20.2126H144.268V23.4678Z"
                fill="#EF233C"
              />
              <path
                d="M136.162 25.6195H133.431V0.185059H136.162V25.6195ZM122.783 1.8954C126.507 1.8954 129.211 4.43334 129.211 9.28851V12.1575C129.211 17.0126 126.507 19.523 122.783 19.523C119.059 19.523 116.355 17.0126 116.355 12.1575V9.28851C116.355 4.40575 119.059 1.8954 122.783 1.8954ZM122.783 17.0678C124.769 17.0678 126.59 15.6609 126.59 11.7713V9.67471C126.59 5.78506 124.742 4.37816 122.783 4.37816C120.797 4.37816 118.976 5.78506 118.976 9.67471V11.7713C118.976 15.6609 120.797 17.0678 122.783 17.0678Z"
                fill="#332941"
              />
              <path
                d="M112.224 1.06787V10.1713H105.328V12.7644H115.617V15.0817H92.2793V12.7644H102.569V10.1713H95.6724V1.06787H112.224ZM95.2862 19.8265V17.5093H112.362V25.8679H109.631V19.8265H95.2862ZM109.521 7.88167V3.35753H98.3758V7.88167H109.521Z"
                fill="#332941"
              />
              <path
                d="M75.9525 13.2333H75.9249C75.7318 13.7851 75.2904 14.392 74.7387 15.054C73.6352 16.3782 72.2283 17.8954 70.7662 19.3851L68.918 17.5368C70.5731 15.9644 72.0076 14.4747 73.1938 12.9299C74.2973 11.4954 74.5731 10.1437 74.5731 8.57127V4.92989H70.2145V2.64023H81.3042V4.92989H77.2214V8.57127C77.2214 10.1437 77.58 11.4402 78.6835 12.8747C79.8421 14.3644 81.0559 15.6609 82.6835 17.2333L80.8352 19.054C79.3731 17.592 78.2145 16.3782 77.1111 15.054C76.5594 14.392 76.1456 13.7851 75.9525 13.2333ZM83.8973 8.51609V0.709198H86.5731V24.3782H83.8973V10.8885H80.0352V8.51609H83.8973ZM91.6214 0.185059V25.6195H88.9456V0.185059H91.6214Z"
                fill="#332941"
              />
              <path
                d="M52.8676 2.08851C56.5365 2.08851 58.4676 4.54368 58.4676 9.39885V9.48161H61.0883V0.709198H63.7641V24.3782H61.0883V11.854H58.4676V12.1023C58.4676 16.9575 56.5365 19.4126 52.8676 19.4126C49.1986 19.4126 47.2676 16.9575 47.2676 12.1023V9.39885C47.2676 4.54368 49.1986 2.08851 52.8676 2.08851ZM68.8124 0.185059V25.6195H66.1365V0.185059H68.8124ZM52.8676 17.0126C54.909 17.0126 55.8745 15.523 55.8745 11.7989V9.7023C55.8745 5.97816 54.909 4.51609 52.8676 4.51609C50.8262 4.51609 49.8607 5.97816 49.8607 9.7023V11.7989C49.8607 15.523 50.8262 17.0126 52.8676 17.0126Z"
                fill="#332941"
              />
              <path
                d="M43.7964 1.06787V10.1713H36.8998V12.7644H47.1895V15.0817H23.8516V12.7644H34.1412V10.1713H27.2447V1.06787H43.7964ZM26.8585 19.8265V17.5093H43.9343V25.8679H41.2033V19.8265H26.8585ZM41.0929 7.88167V3.35753H29.9481V7.88167H41.0929Z"
                fill="#332941"
              />
              <path
                d="M7.52472 13.2333H7.49713C7.30403 13.7851 6.86265 14.392 6.31092 15.054C5.20748 16.3782 3.80058 17.8954 2.33851 19.3851L0.490234 17.5368C2.14541 15.9644 3.57989 14.4747 4.7661 12.9299C5.86955 11.4954 6.14541 10.1437 6.14541 8.57127V4.92989H1.78679V2.64023H12.8764V4.92989H8.79368V8.57127C8.79368 10.1437 9.1523 11.4402 10.2558 12.8747C11.4144 14.3644 12.6282 15.6609 14.2558 17.2333L12.4075 19.054C10.9454 17.592 9.78679 16.3782 8.68334 15.054C8.13161 14.392 7.71782 13.7851 7.52472 13.2333ZM15.4695 8.51609V0.709198H18.1454V24.3782H15.4695V10.8885H11.6075V8.51609H15.4695ZM23.1937 0.185059V25.6195H20.5178V0.185059H23.1937Z"
                fill="#332941"
              />
            </svg>
            <svg
              width="285"
              height="37"
              viewBox="0 0 285 37"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              className={styles.svg3}
            >
              <path
                d="M265.509 35.9181H260.682V21.5733H260.684C260.684 21.5733 263.625 21.5733 265.509 21.5732C265.509 27.1753 265.509 35.9181 265.509 35.9181Z"
                fill="#EF233C"
              />
              <path
                d="M260.679 26.3979L260.679 21.5703L275.023 21.5703L275.023 21.5723C275.023 21.5723 275.023 24.5134 275.023 26.3979C269.421 26.3979 260.679 26.3979 260.679 26.3979Z"
                fill="#EF233C"
              />
              <path
                d="M230.326 1.43584V23.8956C230.326 25.9799 230.012 27.8037 229.384 29.3669C228.755 30.9148 227.889 32.2021 226.786 33.2289C225.698 34.2558 224.403 35.0297 222.901 35.5508C221.399 36.0565 219.774 36.3094 218.027 36.3094C216.158 36.3094 214.502 35.9876 213.062 35.3439C211.621 34.6849 210.411 33.7653 209.43 32.5853C208.449 31.3899 207.698 29.9569 207.177 28.2864C206.671 26.6159 206.418 24.7692 206.418 22.7462V6.26343L205.729 1.43584L211.131 0.976074V23.183C211.131 24.6389 211.322 25.9416 211.706 27.091C212.089 28.2251 212.602 29.1906 213.246 29.9876C213.905 30.7692 214.663 31.3669 215.522 31.7807C216.38 32.1945 217.292 32.4014 218.257 32.4014C219.376 32.4014 220.388 32.2328 221.292 31.8956C222.211 31.5585 222.985 31.0527 223.614 30.3784C224.257 29.704 224.748 28.8688 225.085 27.8726C225.437 26.8611 225.614 25.6811 225.614 24.3324V1.43584H230.326Z"
                fill="#EF233C"
              />
              <path
                d="M172.298 32.2401L171.838 35.9183H152.298L152.643 31.3206V6.26313L151.953 1.43555H171.493V5.11371H157.011L157.47 9.48152V15.5735H169.884V18.9068H157.47V28.1022L157.24 32.2401H172.298Z"
                fill="#332941"
              />
              <path
                d="M107.348 1.50481L117.233 0.976074V26.0335C117.233 28.9761 116.436 31.4052 114.842 33.3209C113.263 35.2366 110.972 36.2328 107.968 36.3094C105.394 36.3094 103.118 35.2979 101.141 33.2749L103.256 30.5623C103.409 30.7155 103.631 30.8994 103.922 31.114C104.229 31.3132 104.581 31.5048 104.98 31.6887C105.378 31.8726 105.807 32.0259 106.267 32.1485C106.742 32.2711 107.233 32.3324 107.738 32.3324C109.332 32.3324 110.505 31.7347 111.256 30.5393C112.022 29.3439 112.405 27.5355 112.405 25.114V9.5278L112.865 5.15998L107.807 5.45883L107.348 1.50481Z"
                fill="#332941"
              />
              <path
                d="M71.1573 32.2401L70.6976 35.9183H51.1573L51.5022 31.3206V6.26313L50.8125 1.43555H70.3527V5.11371H55.87L56.3297 9.48152V15.5735H68.7435V18.9068H56.3297V28.1022L56.0999 32.2401H71.1573Z"
                fill="#332941"
              />
              <path
                d="M6.2069 1.50481L16.092 0.976074V26.0335C16.092 28.9761 15.295 31.4052 13.7011 33.3209C12.1226 35.2366 9.83142 36.2328 6.82759 36.3094C4.25287 36.3094 1.97701 35.2979 0 33.2749L2.11494 30.5623C2.2682 30.7155 2.49042 30.8994 2.78161 31.114C3.08812 31.3132 3.44061 31.5048 3.83908 31.6887C4.23755 31.8726 4.66667 32.0259 5.12644 32.1485C5.60153 32.2711 6.09195 32.3324 6.5977 32.3324C8.19157 32.3324 9.36398 31.7347 10.1149 30.5393C10.8812 29.3439 11.2644 27.5355 11.2644 25.114V9.5278L11.7241 5.15998L6.66667 5.45883L6.2069 1.50481Z"
                fill="#332941"
              />
              <path
                d="M284.852 15.076H280.232L271.542 7.55877L270.508 5.00705L269.496 7.5128L261.059 15.03H256.094L268.852 1.55877L271.818 1.16797L284.852 15.076Z"
                fill="#EF233C"
              />
            </svg>
          </div>
          <div className={styles['button-group']}>
            <Anchor href="/notices/contact-us" target="_blank">
              문의하기
            </Anchor>
            {deviceSafari !== 'isSafari' && (
              <button type="button" onClick={onInstallPWA}>
                앱 내려받기
              </button>
            )}
          </div>
        </div>
        <div className={styles.notices}>
          <hr />
          <ul>
            {noticesData
              .filter((notice) => notice.platform === 'jejeup')
              .map((notice) => (
                <li key={notice.idx}>
                  <Anchor key={notice.idx} href={`/notices/${notice.idx}`} scroll={false} shallow={true}>
                    <strong>
                      <span>{notice.subject}</span>
                    </strong>
                    <time>{notice.created}</time>
                  </Anchor>
                </li>
              ))}
          </ul>
        </div>
      </div>
    </main>
  );
};

export const getServerSideProps: GetServerSideProps = async () => {
  const response = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/api/notices`);
  const data = await response.json();

  return {
    props: { notices: data },
  };
};

export default Notices;
